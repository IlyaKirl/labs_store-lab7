package ru.ystu.labs_store.controller;import org.springframework.stereotype.Controller;import org.springframework.ui.Model;import org.springframework.web.bind.annotation.GetMapping;import org.springframework.web.bind.annotation.ModelAttribute;import org.springframework.web.bind.annotation.PathVariable;import org.springframework.web.bind.annotation.PostMapping;import ru.ystu.labs_store.model.Category;import ru.ystu.labs_store.model.Product;import ru.ystu.labs_store.service.main.MainService;import javax.servlet.http.HttpServletRequest;import java.util.List;@Controllerpublic class MainController {	private final MainService service;	public MainController(MainService service) {		this.service = service;	}	@GetMapping("/")	public String catalog(Model model, HttpServletRequest request,						  @ModelAttribute("product") Product receiveProduct,						  @ModelAttribute("category") Category category) {		List<Product> productList = service.getProductListByCategory(category, receiveProduct);		List<Category> listCategory = service.getCategoryList();		boolean isAdmin = request.isUserInRole("admin");		model.addAttribute("products", productList);		model.addAttribute("categories", listCategory);		model.addAttribute("is_admin", isAdmin);		return "mainPage";	}	@PostMapping("/")	public String searchCatalog(Model model, HttpServletRequest request,								@ModelAttribute("product") Product receiveProduct,								@ModelAttribute("category") Category category) {		return catalog(model, request, receiveProduct, category);	}	@GetMapping("/category/{id}")	public String showProductsOfCategory(Model model, HttpServletRequest request,										 @PathVariable("id") int id,										 @ModelAttribute("product") Product receiveProduct) {		Category category = service.getCategory(id);		return catalog(model, request, receiveProduct, category);	}}